{"version":3,"file":"static/js/751.0d8920bd.chunk.js","mappings":"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","sources":["components/LocationMapPreview.jsx","components/Step1_Locations.jsx","utils.jsx","components/Step2_DateTime.jsx","components/Step3_Vehicle.jsx","components/Step5_CustomerInfo.jsx","components/BookingConfirmationTemplate.jsx","components/BookingConfirmationModal.jsx","components/Step6_Review.jsx","components/ProgressBar.jsx","BookingWizard.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport \"./LocationMapPreview.css\";\r\n\r\nexport default function LocationMapPreview({ pickupCoords, dropoffCoords, pickupAddress, dropoffAddress, onPickupSelect, onDropoffSelect, onMapClose, alwaysVisible = false }) {\r\n  const mapRef = useRef(null);\r\n  const mapInstanceRef = useRef(null);\r\n  const pickupCoordsRef = useRef(pickupCoords);\r\n  const dropoffCoordsRef = useRef(dropoffCoords);\r\n  const [activeLocation, setActiveLocation] = useState(() => {\r\n    if (!pickupCoords) return 'pickup';\r\n    if (!dropoffCoords) return 'dropoff';\r\n    return 'pickup';\r\n  });\r\n  const activeLocationRef = useRef(activeLocation);\r\n  const [pickupMarker, setPickupMarker] = useState(null);\r\n  const [dropoffMarker, setDropoffMarker] = useState(null);\r\n  const [isGeocoding, setIsGeocoding] = useState(false);\r\n  const [isGettingLocation, setIsGettingLocation] = useState(false);\r\n\r\n  const selectActiveLocation = (location) => {\r\n    setActiveLocation(location);\r\n  };\r\n\r\n  // Sync refs with props\r\n  useEffect(() => {\r\n    pickupCoordsRef.current = pickupCoords;\r\n    dropoffCoordsRef.current = dropoffCoords;\r\n  }, [pickupCoords, dropoffCoords]);\r\n\r\n  useEffect(() => {\r\n    activeLocationRef.current = activeLocation;\r\n  }, [activeLocation]);\r\n\r\n  // Determine which location to set next\r\n  const getNextLocationToSet = () => {\r\n    if (!pickupCoords) return 'pickup';\r\n    if (!dropoffCoords) return 'dropoff';\r\n    return activeLocation;\r\n  };\r\n\r\n  // Reverse geocode coordinates to get address using OpenStreetMap Nominatim (free, no API key)\r\n  const reverseGeocode = async (lat, lng) => {\r\n    try {\r\n      const url = `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&addressdetails=1`;\r\n      const response = await fetch(url, {\r\n        headers: {\r\n          'User-Agent': 'J&J Limo Services Booking App'\r\n        }\r\n      });\r\n      const data = await response.json();\r\n      return data.display_name || `${lat.toFixed(6)}, ${lng.toFixed(6)}`;\r\n    } catch (err) {\r\n      console.error('Reverse geocoding error:', err);\r\n      return `${lat.toFixed(6)}, ${lng.toFixed(6)}`;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!mapRef.current) return;\r\n\r\n    let isMounted = true;\r\n\r\n    // Initialize Leaflet map (free, no API key required)\r\n    const initializeMap = () => {\r\n      if (!window.L || !isMounted || !mapRef.current) return;\r\n      \r\n      // Check if map already exists\r\n      if (mapInstanceRef.current) {\r\n        return;\r\n      }\r\n\r\n      // Determine center and bounds\r\n      let center = [40.7128, -74.0060]; // Default: NYC (will be updated if user location available)\r\n      let bounds = null;\r\n\r\n      // Get user's location for initial map center - prioritize this\r\n      if (navigator.geolocation && !pickupCoords && !dropoffCoords) {\r\n        navigator.geolocation.getCurrentPosition(\r\n          (position) => {\r\n            if (isMounted && mapInstanceRef.current) {\r\n              const userLat = position.coords.latitude;\r\n              const userLng = position.coords.longitude;\r\n              center = [userLat, userLng];\r\n              mapInstanceRef.current.setView([userLat, userLng], 13);\r\n            }\r\n          },\r\n          () => {\r\n            // Use default if geolocation fails\r\n            if (isMounted && mapInstanceRef.current) {\r\n              mapInstanceRef.current.setView(center, 13);\r\n            }\r\n          },\r\n          {\r\n            enableHighAccuracy: true,\r\n            timeout: 10000,\r\n            maximumAge: 0\r\n          }\r\n        );\r\n      }\r\n\r\n      if (pickupCoords && dropoffCoords) {\r\n        center = [\r\n          (pickupCoords.lat + dropoffCoords.lat) / 2,\r\n          (pickupCoords.lng + dropoffCoords.lng) / 2\r\n        ];\r\n        bounds = [\r\n          [pickupCoords.lat, pickupCoords.lng],\r\n          [dropoffCoords.lat, dropoffCoords.lng]\r\n        ];\r\n      } else if (pickupCoords) {\r\n        center = [pickupCoords.lat, pickupCoords.lng];\r\n      } else if (dropoffCoords) {\r\n        center = [dropoffCoords.lat, dropoffCoords.lng];\r\n      }\r\n\r\n      // Initialize map with center (will be updated if user location is available)\r\n      const newMap = window.L.map(mapRef.current).setView(center, 13);\r\n      \r\n      // If no coordinates exist, automatically get user location and center map\r\n      if (!pickupCoords && !dropoffCoords && navigator.geolocation) {\r\n        setIsGettingLocation(true);\r\n        navigator.geolocation.getCurrentPosition(\r\n          (position) => {\r\n            if (isMounted && newMap) {\r\n              const userLat = position.coords.latitude;\r\n              const userLng = position.coords.longitude;\r\n              newMap.setView([userLat, userLng], 13);\r\n              setIsGettingLocation(false);\r\n            }\r\n          },\r\n          () => {\r\n            // Keep default center if geolocation fails\r\n            setIsGettingLocation(false);\r\n          },\r\n          {\r\n            enableHighAccuracy: true,\r\n            timeout: 10000,\r\n            maximumAge: 0\r\n          }\r\n        );\r\n      }\r\n\r\n      // Add OpenStreetMap tiles (free, no API key required)\r\n      window.L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n        attribution: '© OpenStreetMap contributors',\r\n        maxZoom: 19\r\n      }).addTo(newMap);\r\n\r\n      mapInstanceRef.current = newMap;\r\n\r\n      // Fit bounds if both locations exist\r\n      if (bounds) {\r\n        newMap.fitBounds(bounds, { padding: [50, 50] });\r\n      }\r\n\r\n      // Create large, modern pin icons like delivery apps\r\n      const redPinIcon = window.L.divIcon({\r\n        className: 'custom-pin pickup-pin',\r\n        html: `\r\n          <div class=\"modern-pin pickup-pin-modern\">\r\n            <div class=\"pin-circle pickup\">A</div>\r\n            <div class=\"pin-shadow\"></div>\r\n          </div>\r\n        `,\r\n        iconSize: [40, 40],\r\n        iconAnchor: [20, 40]\r\n      });\r\n\r\n      const bluePinIcon = window.L.divIcon({\r\n        className: 'custom-pin dropoff-pin',\r\n        html: `\r\n          <div class=\"modern-pin dropoff-pin-modern\">\r\n            <div class=\"pin-circle dropoff\">B</div>\r\n            <div class=\"pin-shadow\"></div>\r\n          </div>\r\n        `,\r\n        iconSize: [40, 40],\r\n        iconAnchor: [20, 40]\r\n      });\r\n\r\n      // Add markers with colored pins\r\n      if (pickupCoords) {\r\n        const pickup = window.L.marker([pickupCoords.lat, pickupCoords.lng], {\r\n          icon: redPinIcon\r\n        }).addTo(newMap);\r\n        pickup.bindPopup('<strong style=\"color: #ef4444;\">Pickup Location</strong><br>' + \r\n          pickupCoords.lat.toFixed(6) + ', ' + pickupCoords.lng.toFixed(6));\r\n        setPickupMarker(pickup);\r\n      }\r\n\r\n      if (dropoffCoords) {\r\n        const dropoff = window.L.marker([dropoffCoords.lat, dropoffCoords.lng], {\r\n          icon: bluePinIcon\r\n        }).addTo(newMap);\r\n        dropoff.bindPopup('<strong style=\"color: #3b82f6;\">Dropoff Location</strong><br>' + \r\n          dropoffCoords.lat.toFixed(6) + ', ' + dropoffCoords.lng.toFixed(6));\r\n        setDropoffMarker(dropoff);\r\n      }\r\n\r\n      // Add route line if both locations exist\r\n      if (pickupCoords && dropoffCoords) {\r\n        const routeLine = window.L.polyline(\r\n          [[pickupCoords.lat, pickupCoords.lng], [dropoffCoords.lat, dropoffCoords.lng]],\r\n          { color: '#0b6cf2', weight: 3, dashArray: '10, 10' }\r\n        ).addTo(newMap);\r\n      }\r\n\r\n      // Store map click handler reference - automatically determines which location to set\r\n      const handleMapClick = async (e) => {\r\n        const { lat, lng } = e.latlng;\r\n        \r\n        // Use refs to get latest state\r\n        const currentPickup = pickupCoordsRef.current;\r\n        const currentDropoff = dropoffCoordsRef.current;\r\n        \r\n        // Determine which location to set based on current state\r\n        let locationToSet = null;\r\n        if (!currentPickup) {\r\n          locationToSet = 'pickup';\r\n        } else if (!currentDropoff) {\r\n          locationToSet = 'dropoff';\r\n        } else {\r\n          locationToSet = activeLocationRef.current || 'pickup';\r\n        }\r\n        \r\n        if (!locationToSet) return;\r\n        \r\n        // Show loading indicator (state setter is stable, safe to use)\r\n        setIsGeocoding(true);\r\n        \r\n        // Reverse geocode to get address\r\n        const address = await reverseGeocode(lat, lng);\r\n        \r\n        setIsGeocoding(false);\r\n        \r\n        if (locationToSet === 'pickup' && onPickupSelect) {\r\n          onPickupSelect({ lat, lng }, address);\r\n          if (!currentDropoff) {\r\n            setActiveLocation('dropoff');\r\n          }\r\n        } else if (locationToSet === 'dropoff' && onDropoffSelect) {\r\n          onDropoffSelect({ lat, lng }, address);\r\n          // Don't auto-close - let user close manually\r\n        }\r\n      };\r\n      \r\n      newMap.on('click', handleMapClick);\r\n    };\r\n\r\n    // Load Leaflet if not already loaded\r\n    if (!window.L) {\r\n      // Check if CSS is already loaded\r\n      if (!document.querySelector('link[href*=\"leaflet\"]')) {\r\n        const link = document.createElement('link');\r\n        link.rel = 'stylesheet';\r\n        link.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';\r\n        link.integrity = 'sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=';\r\n        link.crossOrigin = '';\r\n        document.head.appendChild(link);\r\n      }\r\n\r\n      // Check if script is already loaded or loading\r\n      const existingScript = document.querySelector('script[src*=\"leaflet\"]');\r\n      if (!existingScript) {\r\n        const script = document.createElement('script');\r\n        script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';\r\n        script.integrity = 'sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=';\r\n        script.crossOrigin = '';\r\n        script.onload = () => {\r\n          if (isMounted) {\r\n            setTimeout(initializeMap, 100);\r\n          }\r\n        };\r\n        script.onerror = () => {\r\n          console.error('Failed to load Leaflet library');\r\n        };\r\n        document.body.appendChild(script);\r\n      } else {\r\n        // Script is loading, wait for it\r\n        const checkLeaflet = setInterval(() => {\r\n          if (window.L && isMounted) {\r\n            clearInterval(checkLeaflet);\r\n            setTimeout(initializeMap, 100);\r\n          }\r\n        }, 100);\r\n        \r\n        // Cleanup interval after 10 seconds\r\n        setTimeout(() => clearInterval(checkLeaflet), 10000);\r\n      }\r\n    } else {\r\n      // Leaflet already loaded, initialize immediately\r\n      setTimeout(initializeMap, 100);\r\n    }\r\n\r\n    return () => {\r\n      isMounted = false;\r\n      if (mapInstanceRef.current) {\r\n        mapInstanceRef.current.remove();\r\n        mapInstanceRef.current = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Update markers when coordinates change\r\n  useEffect(() => {\r\n    if (!mapInstanceRef.current || !window.L) return;\r\n    const map = mapInstanceRef.current;\r\n\r\n    // Remove existing markers\r\n    if (pickupMarker) {\r\n      map.removeLayer(pickupMarker);\r\n      setPickupMarker(null);\r\n    }\r\n    if (dropoffMarker) {\r\n      map.removeLayer(dropoffMarker);\r\n      setDropoffMarker(null);\r\n    }\r\n\r\n    // Create large, modern pin icons like delivery apps\r\n    const redPinIcon = window.L.divIcon({\r\n      className: 'custom-pin pickup-pin',\r\n      html: `\r\n        <div class=\"modern-pin pickup-pin-modern\">\r\n          <div class=\"pin-circle pickup\">A</div>\r\n          <div class=\"pin-shadow\"></div>\r\n        </div>\r\n      `,\r\n      iconSize: [40, 40],\r\n      iconAnchor: [20, 40]\r\n    });\r\n\r\n    const bluePinIcon = window.L.divIcon({\r\n      className: 'custom-pin dropoff-pin',\r\n      html: `\r\n        <div class=\"modern-pin dropoff-pin-modern\">\r\n          <div class=\"pin-circle dropoff\">B</div>\r\n          <div class=\"pin-shadow\"></div>\r\n        </div>\r\n      `,\r\n      iconSize: [40, 40],\r\n      iconAnchor: [20, 40]\r\n    });\r\n\r\n    // Add pickup marker with red pin (only if coordinates exist)\r\n    if (pickupCoords) {\r\n      const pickup = window.L.marker([pickupCoords.lat, pickupCoords.lng], {\r\n        icon: redPinIcon\r\n      }).addTo(map);\r\n      pickup.bindPopup('<strong style=\"color: #ef4444;\">Pickup Location</strong><br>' + \r\n        pickupCoords.lat.toFixed(6) + ', ' + pickupCoords.lng.toFixed(6));\r\n      setPickupMarker(pickup);\r\n    } else {\r\n      // Ensure marker state is null when coordinates are cleared\r\n      setPickupMarker(null);\r\n    }\r\n\r\n    // Add dropoff marker with blue pin (only if coordinates exist)\r\n    if (dropoffCoords) {\r\n      const dropoff = window.L.marker([dropoffCoords.lat, dropoffCoords.lng], {\r\n        icon: bluePinIcon\r\n      }).addTo(map);\r\n      dropoff.bindPopup('<strong style=\"color: #3b82f6;\">Dropoff Location</strong><br>' + \r\n        dropoffCoords.lat.toFixed(6) + ', ' + dropoffCoords.lng.toFixed(6));\r\n      setDropoffMarker(dropoff);\r\n    } else {\r\n      // Ensure marker state is null when coordinates are cleared\r\n      setDropoffMarker(null);\r\n    }\r\n\r\n    // Update route line\r\n    map.eachLayer((layer) => {\r\n      if (layer instanceof window.L.Polyline) {\r\n        map.removeLayer(layer);\r\n      }\r\n    });\r\n\r\n    if (pickupCoords && dropoffCoords) {\r\n      const routeLine = window.L.polyline(\r\n        [[pickupCoords.lat, pickupCoords.lng], [dropoffCoords.lat, dropoffCoords.lng]],\r\n        { color: '#0b6cf2', weight: 3, dashArray: '10, 10' }\r\n      ).addTo(map);\r\n      \r\n      // Fit bounds to show both locations\r\n      map.fitBounds(\r\n        [[pickupCoords.lat, pickupCoords.lng], [dropoffCoords.lat, dropoffCoords.lng]],\r\n        { padding: [50, 50] }\r\n      );\r\n    } else if (pickupCoords) {\r\n      map.setView([pickupCoords.lat, pickupCoords.lng], 13);\r\n    } else if (dropoffCoords) {\r\n      map.setView([dropoffCoords.lat, dropoffCoords.lng], 13);\r\n    }\r\n  }, [pickupCoords, dropoffCoords]);\r\n\r\n  return (\r\n    <div className=\"location-map-preview-modern\">\r\n      <div className=\"map-wrapper\">\r\n        <div ref={mapRef} className=\"map-container-full\"></div>\r\n        \r\n        {/* Close button - only show if not always visible */}\r\n        {!alwaysVisible && (\r\n          <button\r\n            className=\"map-close-btn\"\r\n            onClick={() => onMapClose && onMapClose()}\r\n            type=\"button\"\r\n            title=\"Close map\"\r\n          >\r\n            ✕\r\n          </button>\r\n        )}\r\n        \r\n        {/* Loading indicators */}\r\n        {isGeocoding && (\r\n          <div className=\"map-instruction-card\">\r\n            <div className=\"instruction-content\">\r\n              <div className=\"instruction-icon loading\">\r\n                <div className=\"spinner\"></div>\r\n              </div>\r\n              <div>\r\n                <h4>Getting address...</h4>\r\n                <p>Please wait while we find the location</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {isGettingLocation && !pickupCoords && !dropoffCoords && (\r\n          <div className=\"map-instruction-card\">\r\n            <div className=\"instruction-content\">\r\n              <div className=\"instruction-icon loading\">\r\n                <div className=\"spinner\"></div>\r\n              </div>\r\n              <div>\r\n                <h4>Finding your location...</h4>\r\n                <p>Centering map on your current position</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport LocationMapPreview from \"./LocationMapPreview\";\r\nimport { estimateDistanceKm } from \"../utils\";\r\n\r\nexport default function Step1_Locations({ next, data, setData }) {\r\n  const [pickupCoords, setPickupCoords] = useState(data.pickupCoords || null);\r\n  const [dropoffCoords, setDropoffCoords] = useState(data.dropoffCoords || null);\r\n  const [pickupSearch, setPickupSearch] = useState(data.pickup || \"\");\r\n  const [dropoffSearch, setDropoffSearch] = useState(data.dropoff || \"\");\r\n  const [pickupLoading, setPickupLoading] = useState(false);\r\n  const [dropoffLoading, setDropoffLoading] = useState(false);\r\n  const [pickupError, setPickupError] = useState(\"\");\r\n  const [dropoffError, setDropoffError] = useState(\"\");\r\n  const [pickupResults, setPickupResults] = useState([]);\r\n  const [dropoffResults, setDropoffResults] = useState([]);\r\n\r\n  const handlePickupCoords = (coords, address) => {\r\n    setPickupCoords(coords);\r\n    setData({ \r\n      pickupCoords: coords,\r\n      pickup: address || (coords ? `${coords.lat.toFixed(6)}, ${coords.lng.toFixed(6)}` : \"\")\r\n    });\r\n    setPickupSearch(address || (coords ? `${coords.lat.toFixed(6)}, ${coords.lng.toFixed(6)}` : \"\"));\r\n    setPickupError(\"\");\r\n    setPickupResults([]);\r\n  };\r\n\r\n  const handleDropoffCoords = (coords, address) => {\r\n    setDropoffCoords(coords);\r\n    setData({ \r\n      dropoffCoords: coords,\r\n      dropoff: address || (coords ? `${coords.lat.toFixed(6)}, ${coords.lng.toFixed(6)}` : \"\")\r\n    });\r\n    setDropoffSearch(address || (coords ? `${coords.lat.toFixed(6)}, ${coords.lng.toFixed(6)}` : \"\"));\r\n    setDropoffError(\"\");\r\n    setDropoffResults([]);\r\n  };\r\n\r\n  const handleLocationSearch = async (type) => {\r\n    const isPickup = type === 'pickup';\r\n    const query = (isPickup ? pickupSearch : dropoffSearch).trim();\r\n\r\n    if (!query) {\r\n      (isPickup ? setPickupError : setDropoffError)(\"Please enter an address or landmark.\");\r\n      return;\r\n    }\r\n\r\n    (isPickup ? setPickupLoading : setDropoffLoading)(true);\r\n    (isPickup ? setPickupError : setDropoffError)(\"\");\r\n\r\n    try {\r\n      const url = `https://nominatim.openstreetmap.org/search?format=json&limit=5&addressdetails=1&q=${encodeURIComponent(query)}`;\r\n      const response = await fetch(url, {\r\n        headers: {\r\n          'User-Agent': 'J&J Limo Services Booking App'\r\n        }\r\n      });\r\n      const results = await response.json();\r\n\r\n      if (!results || results.length === 0) {\r\n        (isPickup ? setPickupError : setDropoffError)(\"No results found. Please try a different address.\");\r\n        (isPickup ? setPickupResults : setDropoffResults)([]);\r\n        return;\r\n      }\r\n\r\n      (isPickup ? setPickupResults : setDropoffResults)(results);\r\n    } catch (error) {\r\n      console.error(\"Search error:\", error);\r\n      (isPickup ? setPickupError : setDropoffError)(\"Something went wrong. Please try again.\");\r\n      (isPickup ? setPickupResults : setDropoffResults)([]);\r\n    } finally {\r\n      (isPickup ? setPickupLoading : setDropoffLoading)(false);\r\n    }\r\n  };\r\n\r\n  const handleSelectResult = (type, result) => {\r\n    const coords = {\r\n      lat: parseFloat(result.lat),\r\n      lng: parseFloat(result.lon)\r\n    };\r\n    const fullAddress = result.display_name;\r\n    if (type === 'pickup') {\r\n      handlePickupCoords(coords, fullAddress);\r\n      setPickupResults([]);\r\n    } else {\r\n      handleDropoffCoords(coords, fullAddress);\r\n      setDropoffResults([]);\r\n    }\r\n  };\r\n\r\n  // Automatically get user's location and fill pickup when permission is granted\r\n  useEffect(() => {\r\n    // Only auto-fill if pickup is not already set and geolocation is available\r\n    if (pickupCoords || !navigator.geolocation) return;\r\n\r\n    let isMounted = true;\r\n\r\n    // Request location permission and auto-fill pickup\r\n    navigator.geolocation.getCurrentPosition(\r\n      async (position) => {\r\n        if (!isMounted) return;\r\n        \r\n        const { latitude, longitude } = position.coords;\r\n        \r\n        try {\r\n          // Reverse geocode to get address\r\n          const url = `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&addressdetails=1`;\r\n          const response = await fetch(url, {\r\n            headers: {\r\n              'User-Agent': 'J&J Limo Services Booking App'\r\n            }\r\n          });\r\n          const geocodeData = await response.json();\r\n          \r\n          if (geocodeData.display_name && isMounted && !pickupCoords) {\r\n            // Auto-fill pickup location\r\n            handlePickupCoords(\r\n              { lat: latitude, lng: longitude },\r\n              geocodeData.display_name\r\n            );\r\n          }\r\n        } catch (err) {\r\n          console.error('Auto-fill location error:', err);\r\n          // Silently fail - user can still enter manually\r\n        }\r\n      },\r\n      () => {\r\n        // Permission denied or error - silently fail, user can enter manually\r\n      },\r\n      {\r\n        enableHighAccuracy: true,\r\n        timeout: 10000,\r\n        maximumAge: 0\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []); // Only run once on mount\r\n\r\n  // Whenever both pickup and dropoff are set, estimate distance in km.\r\n  // We intentionally depend only on the coordinates here to avoid a render loop.\r\n  useEffect(() => {\r\n    if (pickupCoords && dropoffCoords) {\r\n      const km = estimateDistanceKm(pickupCoords, dropoffCoords);\r\n      setData({ distanceKm: km });\r\n    } else {\r\n      setData({ distanceKm: 0 });\r\n    }\r\n  }, [pickupCoords, dropoffCoords]);\r\n\r\n  const clearLocation = (type) => {\r\n    if (type === 'pickup') {\r\n      setPickupCoords(null);\r\n      setPickupSearch(\"\");\r\n      setData({ pickupCoords: null, pickup: \"\" });\r\n      setPickupResults([]);\r\n    } else {\r\n      setDropoffCoords(null);\r\n      setDropoffSearch(\"\");\r\n      setData({ dropoffCoords: null, dropoff: \"\" });\r\n      setDropoffResults([]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"step-card\">\r\n      <h2 className=\"step-title\">Where would you like to go?</h2>\r\n      <p className=\"step-subtitle\">\r\n        Search for your pickup and dropoff locations above, then click <strong>Search</strong> to place them on the map. \r\n        If search can&apos;t find an exact match, you can still tap directly on the map to fine‑tune the location.\r\n      </p>\r\n\r\n      <div className=\"location-search-section\">\r\n        <div className=\"location-search-card\">\r\n          <div className=\"location-search-header\">\r\n            <label>\r\n              Pickup Location\r\n              <span className={`required-asterisk ${pickupCoords ? 'hidden' : ''}`}>*</span>\r\n            </label>\r\n            {pickupCoords && (\r\n              <button type=\"button\" className=\"link-btn\" onClick={() => clearLocation('pickup')}>\r\n                Clear\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div className=\"location-search-input\">\r\n            <input\r\n              type=\"text\"\r\n              value={pickupSearch}\r\n              placeholder=\"Enter address, airport, or landmark\"\r\n              onChange={(e) => setPickupSearch(e.target.value)}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter') {\r\n                  e.preventDefault();\r\n                  handleLocationSearch('pickup');\r\n                }\r\n              }}\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => handleLocationSearch('pickup')}\r\n              disabled={pickupLoading}\r\n            >\r\n              {pickupLoading ? 'Searching...' : 'Search'}\r\n            </button>\r\n          </div>\r\n          {pickupError && <p className=\"location-error\">{pickupError}</p>}\r\n          {pickupCoords && (\r\n            <p className=\"location-coords\">\r\n              {pickupCoords.lat.toFixed(4)}, {pickupCoords.lng.toFixed(4)}\r\n            </p>\r\n          )}\r\n          {pickupResults.length > 0 && (\r\n            <ul className=\"location-search-results\">\r\n              {pickupResults.map((result) => (\r\n                <li key={result.place_id}>\r\n                  <button type=\"button\" onClick={() => handleSelectResult('pickup', result)}>\r\n                    <span className=\"result-title\">{result.display_name}</span>\r\n                    {result.address && (\r\n                      <span className=\"result-subtitle\">\r\n                        {result.address.road || result.address.neighbourhood || result.address.suburb || ''}\r\n                      </span>\r\n                    )}\r\n                  </button>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"location-search-card\">\r\n          <div className=\"location-search-header\">\r\n            <label>\r\n              Dropoff Location\r\n              <span className={`required-asterisk ${dropoffCoords ? 'hidden' : ''}`}>*</span>\r\n            </label>\r\n            {dropoffCoords && (\r\n              <button type=\"button\" className=\"link-btn\" onClick={() => clearLocation('dropoff')}>\r\n                Clear\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div className=\"location-search-input\">\r\n            <input\r\n              type=\"text\"\r\n              value={dropoffSearch}\r\n              placeholder=\"Enter address, airport, or landmark\"\r\n              onChange={(e) => setDropoffSearch(e.target.value)}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter') {\r\n                  e.preventDefault();\r\n                  handleLocationSearch('dropoff');\r\n                }\r\n              }}\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => handleLocationSearch('dropoff')}\r\n              disabled={dropoffLoading}\r\n            >\r\n              {dropoffLoading ? 'Searching...' : 'Search'}\r\n            </button>\r\n          </div>\r\n          {dropoffError && <p className=\"location-error\">{dropoffError}</p>}\r\n          {dropoffCoords && (\r\n            <p className=\"location-coords\">\r\n              {dropoffCoords.lat.toFixed(4)}, {dropoffCoords.lng.toFixed(4)}\r\n            </p>\r\n          )}\r\n          {dropoffResults.length > 0 && (\r\n            <ul className=\"location-search-results\">\r\n              {dropoffResults.map((result) => (\r\n                <li key={result.place_id}>\r\n                  <button type=\"button\" onClick={() => handleSelectResult('dropoff', result)}>\r\n                    <span className=\"result-title\">{result.display_name}</span>\r\n                    {result.address && (\r\n                      <span className=\"result-subtitle\">\r\n                        {result.address.road || result.address.neighbourhood || result.address.suburb || ''}\r\n                      </span>\r\n                    )}\r\n                  </button>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <LocationMapPreview\r\n        pickupCoords={pickupCoords}\r\n        dropoffCoords={dropoffCoords}\r\n        pickupAddress={data.pickup}\r\n        dropoffAddress={data.dropoff}\r\n        onPickupSelect={handlePickupCoords}\r\n        onDropoffSelect={handleDropoffCoords}\r\n        onMapClose={() => {}} // Map always visible, no close needed\r\n        alwaysVisible={true}\r\n      />\r\n\r\n      <div className=\"btn-row\">\r\n        <button\r\n          className=\"next-btn\"\r\n          onClick={next}\r\n          disabled={!pickupCoords || !dropoffCoords}\r\n        >\r\n          Continue\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// Haversine formula to estimate straight-line distance between two coords\r\nexport function estimateDistanceKm(a, b) {\r\n  if (!a || !b) return 0;\r\n  const toRad = (v) => (v * Math.PI) / 180;\r\n  const R = 6371; // km\r\n  const dLat = toRad(b.lat - a.lat);\r\n  const dLon = toRad(b.lng - a.lng);\r\n  const lat1 = toRad(a.lat);\r\n  const lat2 = toRad(b.lat);\r\n\r\n  const sinDlat = Math.sin(dLat / 2) ** 2;\r\n  const sinDlon = Math.sin(dLon / 2) ** 2;\r\n  const aHar = sinDlat + Math.cos(lat1) * Math.cos(lat2) * sinDlon;\r\n  const c = 2 * Math.atan2(Math.sqrt(aHar), Math.sqrt(1 - aHar));\r\n  const d = R * c;\r\n  return d; // in km\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Step2_DateTime({ next, back, data, setData }) {\r\n  const today = new Date().toISOString().split(\"T\")[0];\r\n\r\n  const handlePassengersChange = (e) => {\r\n    const raw = e.target.value.replace(/\\D/g, \"\").slice(0, 2); // Limit to 2 digits\r\n    const num = raw ? parseInt(raw, 10) : \"\";\r\n    // Limit to maximum 99\r\n    const maxPassengers = num === \"\" ? \"\" : Math.min(99, Math.max(1, num));\r\n    setData({ passengers: maxPassengers });\r\n  };\r\n\r\n  const isValidFutureDate = () => {\r\n    if (!data.date) return false;\r\n    const picked = new Date(data.date);\r\n    if (Number.isNaN(picked.getTime())) return false;\r\n    const todayDate = new Date();\r\n    todayDate.setHours(0, 0, 0, 0);\r\n    picked.setHours(0, 0, 0, 0);\r\n    return picked >= todayDate;\r\n  };\r\n\r\n  const isValidFutureDateTime = () => {\r\n    if (!isValidFutureDate() || !data.time) return false;\r\n    const [hStr, mStr] = data.time.split(\":\");\r\n    const h = parseInt(hStr, 10);\r\n    const m = parseInt(mStr, 10);\r\n    if (Number.isNaN(h) || Number.isNaN(m)) return false;\r\n\r\n    const picked = new Date(data.date);\r\n    if (Number.isNaN(picked.getTime())) return false;\r\n    picked.setHours(h, m, 0, 0);\r\n\r\n    const now = new Date();\r\n    return picked >= now;\r\n  };\r\n\r\n  const handleDateChange = (e) => {\r\n    // Sanitize date input and ensure year component is max 4 digits.\r\n    const raw = String(e.target.value || \"\");\r\n    if (!raw) return setData({ date: \"\" });\r\n\r\n    // Allow digits and dashes only\r\n    const cleaned = raw.replace(/[^0-9-]/g, \"\");\r\n\r\n    let normalized = cleaned;\r\n\r\n    if (cleaned.includes(\"-\")) {\r\n      const parts = cleaned.split(\"-\").map((p) => p);\r\n      parts[0] = (parts[0] || \"\").slice(0, 4); // year\r\n      if (parts.length > 1) parts[1] = (parts[1] || \"\").slice(0, 2); // month\r\n      if (parts.length > 2) parts[2] = (parts[2] || \"\").slice(0, 2); // day\r\n      // Rebuild but keep trailing parts if present\r\n      normalized = parts.filter((p, i) => p !== \"\" || i === 0).join(\"-\");\r\n    } else {\r\n      // digits-only input: try to map YYYYMMDD -> YYYY-MM-DD progressively\r\n      const digits = cleaned;\r\n      if (digits.length <= 4) {\r\n        normalized = digits.slice(0, 4); // partial year\r\n      } else if (digits.length <= 6) {\r\n        normalized = `${digits.slice(0,4)}-${digits.slice(4)}`; // YYYY-MM\r\n      } else {\r\n        normalized = `${digits.slice(0,4)}-${digits.slice(4,6)}-${digits.slice(6,8)}`; // YYYY-MM-DD\r\n      }\r\n    }\r\n\r\n    setData({ date: normalized });\r\n  };\r\n\r\n  return (\r\n    <div className=\"step-card\">\r\n      <h2 className=\"step-title\">Select Date & Time</h2>\r\n      <p className=\"step-subtitle\">\r\n        Choose the date and time for your trip, then tell us how many passengers will be traveling.\r\n        We’ll only let you continue if the time is in the future.\r\n      </p>\r\n\r\n      <label className=\"label\">\r\n        Date\r\n        <span className={`required-asterisk ${data.date ? 'hidden' : ''}`}>*</span>\r\n      </label>\r\n      <input\r\n        type=\"date\"\r\n        className=\"input-field\"\r\n        value={data.date}\r\n        min={today}\r\n        onChange={handleDateChange}\r\n      />\r\n      {data.date && !isValidFutureDate() && (\r\n        <p className=\"location-error\">Please select today or a future date.</p>\r\n      )}\r\n\r\n      <label className=\"label\">\r\n        Time\r\n        <span className={`required-asterisk ${data.time ? 'hidden' : ''}`}>*</span>\r\n      </label>\r\n      <input\r\n        type=\"time\"\r\n        className=\"input-field\"\r\n        value={data.time}\r\n        onChange={(e) => setData({ time: e.target.value })}\r\n      />\r\n      {data.time && isValidFutureDate() && !isValidFutureDateTime() && (\r\n        <p className=\"location-error\">Please select a time in the future.</p>\r\n      )}\r\n\r\n      <label className=\"label\">\r\n        Passengers\r\n        <span className={`required-asterisk ${data.passengers ? 'hidden' : ''}`}>*</span>\r\n      </label>\r\n      <input\r\n        type=\"number\"\r\n        min={1}\r\n        max={99}\r\n        className=\"input-field\"\r\n        value={data.passengers || \"\"}\r\n        onChange={handlePassengersChange}\r\n        placeholder=\"Enter number of passengers\"\r\n      />\r\n\r\n      <div className=\"btn-row\">\r\n        <button className=\"back-btn\" onClick={back}>Back</button>\r\n        <button\r\n          className=\"next-btn\"\r\n          onClick={next}\r\n          disabled={!isValidFutureDateTime()}\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nconst vehicles = [\r\n  {\r\n    name: \"Sedan\",\r\n    img: \"/assets/Sedan.png\"\r\n  },\r\n  {\r\n    name: \"SUV\",\r\n    img: \"/assets/SUV.png\"\r\n  },\r\n  {\r\n    name: \"Executive\",\r\n    img: \"/assets/Executive.png\"\r\n  },\r\n  {\r\n    name: \"Sprinter Bus\",\r\n    img: \"/assets/Sprinter Bus.png\"\r\n  }\r\n];\r\n\r\nexport default function Step3_Vehicle({ next, back, data, setData }) {\r\n  const handleVehicleSelect = (vehicle) => {\r\n    setData({\r\n      vehicle: vehicle.name\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"step-card\">\r\n      <h2 className=\"step-title\">Choose Your Vehicle</h2>\r\n      <p className=\"step-subtitle\">\r\n        Select the vehicle type that best fits your group and comfort level. Our driver will contact you to discuss pricing and finalize your booking.\r\n      </p>\r\n\r\n      <div className=\"vehicle-grid\">\r\n        {vehicles.map((v) => (\r\n          <div\r\n            key={v.name}\r\n            className={`vehicle-card ${data.vehicle === v.name ? 'selected' : ''}`}\r\n            onClick={() => handleVehicleSelect(v)}\r\n          >\r\n            <img src={v.img} alt={v.name} className=\"vehicle-img\" loading=\"lazy\" decoding=\"async\" />\r\n            <div className=\"vehicle-name\">{v.name}</div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"btn-row\">\r\n        <button className=\"back-btn\" onClick={back}>Back</button>\r\n        <button className=\"next-btn\" onClick={next} disabled={!data.vehicle}>Next</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Step5_CustomerInfo({ next, back, data, setData }) {\r\n  const formatFullName = (value) => {\r\n    // Allow letters, spaces, dot, and hyphen; strip everything else (including @)\r\n    const cleaned = value.replace(/[^a-zA-Z.\\-\\s]/g, '');\r\n\r\n    // Auto-capitalize first letter of each word, but keep spaces as user types\r\n    return cleaned.replace(/\\b([a-zA-Z])([a-zA-Z.]*)/g, (_, first, rest) => {\r\n      return first.toUpperCase() + rest.toLowerCase();\r\n    });\r\n  };\r\n\r\n  const formatEmail = (value) => {\r\n    // Disallow spaces; allow common email characters only\r\n    const noSpaces = value.replace(/\\s+/g, '');\r\n    return noSpaces.replace(/[^a-zA-Z0-9@._-]/g, '');\r\n  };\r\n\r\n  const formatPhoneNumber = (value) => {\r\n    // Remove all non-digits\r\n    const phoneNumber = value.replace(/\\D/g, '');\r\n    \r\n    // Limit to 10 digits (US phone number)\r\n    const phoneNumberDigits = phoneNumber.slice(0, 10);\r\n    \r\n    // Format as (XXX) XXX-XXXX\r\n    if (phoneNumberDigits.length === 0) {\r\n      return '';\r\n    } else if (phoneNumberDigits.length <= 3) {\r\n      return `(${phoneNumberDigits}`;\r\n    } else if (phoneNumberDigits.length <= 6) {\r\n      return `(${phoneNumberDigits.slice(0, 3)}) ${phoneNumberDigits.slice(3)}`;\r\n    } else {\r\n      return `(${phoneNumberDigits.slice(0, 3)}) ${phoneNumberDigits.slice(3, 6)}-${phoneNumberDigits.slice(6)}`;\r\n    }\r\n  };\r\n\r\n  const handlePhoneChange = (e) => {\r\n    const formatted = formatPhoneNumber(e.target.value);\r\n    setData({ phone: formatted });\r\n  };\r\n\r\n  return (\r\n    <div className=\"step-card\">\r\n      <h2 className=\"step-title\">Your Contact Information</h2>\r\n      <p className=\"step-subtitle\">\r\n        Enter your full name, email, and mobile number. We&apos;ll use this information only to\r\n        send your booking confirmation and contact you about this trip.\r\n      </p>\r\n\r\n      <label className=\"label\">\r\n        Full Name\r\n        <span className={`required-asterisk ${data.customerName?.trim() ? 'hidden' : ''}`}>*</span>\r\n      </label>\r\n      <input\r\n        type=\"text\"\r\n        className=\"input-field\"\r\n        value={data.customerName || ''}\r\n        onChange={(e) => {\r\n          const formatted = formatFullName(e.target.value);\r\n          setData({ customerName: formatted });\r\n        }}\r\n        placeholder=\"Enter your full name\"\r\n        required\r\n      />\r\n\r\n      <label className=\"label\">\r\n        Email\r\n        <span className={`required-asterisk ${data.email?.trim() ? 'hidden' : ''}`}>*</span>\r\n      </label>\r\n      <input\r\n        type=\"email\"\r\n        className=\"input-field\"\r\n        value={data.email || ''}\r\n        onChange={(e) => {\r\n          const cleaned = formatEmail(e.target.value);\r\n          setData({ email: cleaned });\r\n        }}\r\n        placeholder=\"your.email@example.com\"\r\n        required\r\n      />\r\n\r\n      <label className=\"label\">\r\n        Phone Number\r\n        <span className={`required-asterisk ${data.phone?.trim() ? 'hidden' : ''}`}>*</span>\r\n      </label>\r\n      <div className=\"phone-input-wrapper\">\r\n        <span className=\"phone-prefix\">+1</span>\r\n        <input\r\n          type=\"tel\"\r\n          className=\"input-field phone-input\"\r\n          value={data.phone || ''}\r\n          onChange={handlePhoneChange}\r\n          placeholder=\"(555) 123-4567\"\r\n          maxLength={17}\r\n          required\r\n        />\r\n      </div>\r\n      <small className=\"input-hint\">US phone number format: +1 (XXX) XXX-XXXX</small>\r\n\r\n      <div className=\"btn-row\">\r\n        <button className=\"back-btn\" onClick={back}>Back</button>\r\n        <button \r\n          className=\"next-btn\" \r\n          onClick={next}\r\n          disabled={\r\n            !data.customerName ||\r\n            !data.phone ||\r\n            data.phone.replace(/\\D/g, '').length < 10 ||\r\n            !data.email ||\r\n            !data.email.includes('@')\r\n          }\r\n        >\r\n          Continue\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\n\nexport default function BookingConfirmationTemplate({ bookingData, bookingRef }) {\n  const formatTime = (time) => {\n    if (!time) return \"—\";\n    const [hStr = '', mStr = ''] = time.split(\":\");\n    if (hStr === '' || mStr === '') return time;\n    const h = parseInt(hStr, 10);\n    if (Number.isNaN(h)) return time;\n    const suffix = h >= 12 ? \"PM\" : \"AM\";\n    const hour12 = h % 12 === 0 ? 12 : h % 12;\n    return `${hour12}:${mStr} ${suffix}`;\n  };\n\n  const formatDate = (dateStr) => {\n    if (!dateStr) return \"—\";\n    try {\n      const date = new Date(dateStr);\n      return date.toLocaleDateString('en-US', { \n        weekday: 'long', \n        year: 'numeric', \n        month: 'long', \n        day: 'numeric' \n      });\n    } catch {\n      return dateStr;\n    }\n  };\n\n  const currentDate = new Date().toLocaleDateString('en-US', { \n    year: 'numeric', \n    month: 'long', \n    day: 'numeric' \n  });\n\n  return (\n    <div className=\"booking-confirmation-template\" id=\"booking-confirmation-template\">\n      <style>{`\n        @media print {\n          @page {\n            size: auto;\n            margin: 12mm;\n          }\n          body * {\n            visibility: hidden;\n          }\n          .booking-confirmation-template,\n          .booking-confirmation-template * {\n            visibility: visible;\n          }\n          .booking-confirmation-template {\n            position: absolute;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            page-break-after: avoid;\n            page-break-inside: avoid;\n            display: flex;\n            flex-direction: column;\n          }\n          .no-print {\n            display: none !important;\n          }\n        }\n        .booking-confirmation-template {\n          max-width: 800px;\n          margin: 0 auto;\n          padding: 20px;\n          background: white;\n          color: #0f172a;\n          font-family: 'Inter', 'Arial', sans-serif;\n          display: flex;\n          flex-direction: column;\n          min-height: fit-content;\n        }\n        .confirmation-header {\n          text-align: center;\n          border-bottom: 2px solid #0b6cf2;\n          padding-bottom: 15px;\n          margin-bottom: 15px;\n          flex-shrink: 0;\n        }\n        .confirmation-logo {\n          max-width: 120px;\n          height: auto;\n          margin-bottom: 10px;\n        }\n        .confirmation-title {\n          font-size: 24px;\n          font-weight: 800;\n          color: #0f172a;\n          margin: 5px 0;\n        }\n        .confirmation-subtitle {\n          font-size: 13px;\n          color: #64748b;\n          margin: 3px 0;\n        }\n        .confirmation-ref {\n          background: #f0f9ff;\n          border: 2px solid #0b6cf2;\n          border-radius: 6px;\n          padding: 10px;\n          margin: 12px 0;\n          text-align: center;\n        }\n        .confirmation-ref-label {\n          font-size: 10px;\n          color: #64748b;\n          text-transform: uppercase;\n          letter-spacing: 1px;\n          margin-bottom: 3px;\n        }\n        .confirmation-ref-number {\n          font-size: 18px;\n          font-weight: 700;\n          color: #0b6cf2;\n          font-family: 'Courier New', monospace;\n        }\n        .confirmation-section {\n          margin: 12px 0;\n          page-break-inside: avoid;\n          flex-shrink: 0;\n        }\n        .confirmation-section-title {\n          font-size: 16px;\n          font-weight: 700;\n          color: #0f172a;\n          margin-bottom: 8px;\n          padding-bottom: 6px;\n          border-bottom: 2px solid #e2e8f0;\n        }\n        .confirmation-row {\n          display: flex;\n          justify-content: space-between;\n          padding: 6px 0;\n          border-bottom: 1px solid #f1f5f9;\n        }\n        .confirmation-row:last-child {\n          border-bottom: none;\n        }\n        .confirmation-label {\n          font-weight: 600;\n          color: #64748b;\n          font-size: 12px;\n          flex: 0 0 40%;\n        }\n        .confirmation-value {\n          color: #0f172a;\n          font-size: 12px;\n          flex: 1;\n          text-align: right;\n        }\n        .confirmation-footer {\n          margin-top: auto;\n          padding-top: 15px;\n          border-top: 2px solid #0b6cf2;\n          text-align: center;\n          page-break-inside: avoid;\n          flex-shrink: 0;\n        }\n        .confirmation-footer-title {\n          font-size: 14px;\n          font-weight: 700;\n          color: #0f172a;\n          margin-bottom: 8px;\n        }\n        .confirmation-footer-info {\n          font-size: 11px;\n          color: #64748b;\n          line-height: 1.5;\n          margin: 4px 0;\n        }\n        .confirmation-footer-info a {\n          color: #0b6cf2;\n          text-decoration: none;\n        }\n        .confirmation-note {\n          background: #f8fafc;\n          border-left: 3px solid #0b6cf2;\n          padding: 12px;\n          margin: 12px 0;\n          border-radius: 6px;\n          page-break-inside: avoid;\n          flex-shrink: 0;\n        }\n        .confirmation-note-title {\n          font-weight: 700;\n          color: #0f172a;\n          margin-bottom: 6px;\n          font-size: 13px;\n        }\n        .confirmation-note-text {\n          font-size: 11px;\n          color: #64748b;\n          line-height: 1.5;\n          margin: 0;\n        }\n        @media print {\n          .booking-confirmation-template {\n            padding: 12mm;\n            max-width: 100%;\n            width: 100%;\n            box-sizing: border-box;\n          }\n          .confirmation-header {\n            padding-bottom: 8px;\n            margin-bottom: 8px;\n          }\n          .confirmation-logo {\n            max-width: 90px;\n            margin-bottom: 6px;\n          }\n          .confirmation-title {\n            font-size: 18px;\n            margin: 2px 0;\n          }\n          .confirmation-subtitle {\n            font-size: 10px;\n            margin: 1px 0;\n          }\n          .confirmation-ref {\n            padding: 8px;\n            margin: 8px 0;\n          }\n          .confirmation-ref-label {\n            font-size: 9px;\n          }\n          .confirmation-ref-number {\n            font-size: 16px;\n          }\n          .confirmation-section {\n            margin: 8px 0;\n          }\n          .confirmation-section-title {\n            font-size: 14px;\n            margin-bottom: 6px;\n            padding-bottom: 4px;\n          }\n          .confirmation-row {\n            padding: 3px 0;\n          }\n          .confirmation-label,\n          .confirmation-value {\n            font-size: 11px;\n          }\n          .confirmation-note {\n            padding: 10px;\n            margin: 8px 0;\n          }\n          .confirmation-note-title {\n            font-size: 12px;\n            margin-bottom: 4px;\n          }\n          .confirmation-note-text {\n            font-size: 10px;\n          }\n          .confirmation-footer {\n            margin-top: 10px;\n            padding-top: 8px;\n          }\n          .confirmation-footer-title {\n            font-size: 12px;\n            margin-bottom: 6px;\n          }\n          .confirmation-footer-info {\n            font-size: 10px;\n            margin: 3px 0;\n          }\n        }\n        \n        /* Auto-adjust for different paper sizes */\n        @media print and (min-width: 210mm) {\n          /* A4 and larger */\n          .booking-confirmation-template {\n            padding: 15mm;\n          }\n        }\n        \n        @media print and (max-width: 216mm) {\n          /* Letter size and smaller */\n          .booking-confirmation-template {\n            padding: 10mm;\n          }\n        }\n      `}</style>\n\n      <div className=\"confirmation-header\">\n        <img \n          src=\"/assets/web-logo.png\" \n          alt=\"J&J Limo Services Logo\" \n          className=\"confirmation-logo\"\n        />\n        <h1 className=\"confirmation-title\">Booking Confirmation</h1>\n        <p className=\"confirmation-subtitle\">J&J Limo Services</p>\n        <p className=\"confirmation-subtitle\">Premium Ground Transportation</p>\n      </div>\n\n      <div className=\"confirmation-ref\">\n        <div className=\"confirmation-ref-label\">Booking Reference Number</div>\n        <div className=\"confirmation-ref-number\">{bookingRef}</div>\n      </div>\n\n      <div className=\"confirmation-section\">\n        <h2 className=\"confirmation-section-title\">Trip Details</h2>\n        <div className=\"confirmation-row\">\n          <span className=\"confirmation-label\">Pickup Location:</span>\n          <span className=\"confirmation-value\">\n            {bookingData.pickup || (bookingData.pickupCoords ? `${bookingData.pickupCoords.lat.toFixed(6)}, ${bookingData.pickupCoords.lng.toFixed(6)}` : \"—\")}\n          </span>\n        </div>\n        <div className=\"confirmation-row\">\n          <span className=\"confirmation-label\">Dropoff Location:</span>\n          <span className=\"confirmation-value\">\n            {bookingData.dropoff || (bookingData.dropoffCoords ? `${bookingData.dropoffCoords.lat.toFixed(6)}, ${bookingData.dropoffCoords.lng.toFixed(6)}` : \"—\")}\n          </span>\n        </div>\n        <div className=\"confirmation-row\">\n          <span className=\"confirmation-label\">Date:</span>\n          <span className=\"confirmation-value\">{formatDate(bookingData.date) || \"—\"}</span>\n        </div>\n        <div className=\"confirmation-row\">\n          <span className=\"confirmation-label\">Time:</span>\n          <span className=\"confirmation-value\">{formatTime(bookingData.time)}</span>\n        </div>\n        <div className=\"confirmation-row\">\n          <span className=\"confirmation-label\">Vehicle Type:</span>\n          <span className=\"confirmation-value\">{bookingData.vehicle || \"—\"}</span>\n        </div>\n        <div className=\"confirmation-row\">\n          <span className=\"confirmation-label\">Number of Passengers:</span>\n          <span className=\"confirmation-value\">{bookingData.passengers || \"—\"}</span>\n        </div>\n      </div>\n\n      <div className=\"confirmation-section\">\n        <h2 className=\"confirmation-section-title\">Contact Information</h2>\n        <div className=\"confirmation-row\">\n          <span className=\"confirmation-label\">Name:</span>\n          <span className=\"confirmation-value\">{bookingData.customerName || \"—\"}</span>\n        </div>\n        <div className=\"confirmation-row\">\n          <span className=\"confirmation-label\">Phone:</span>\n          <span className=\"confirmation-value\">{bookingData.phone ? `+1 ${bookingData.phone}` : \"—\"}</span>\n        </div>\n        <div className=\"confirmation-row\">\n          <span className=\"confirmation-label\">Email:</span>\n          <span className=\"confirmation-value\">{bookingData.email || \"—\"}</span>\n        </div>\n      </div>\n\n      <div className=\"confirmation-note\">\n        <div className=\"confirmation-note-title\">Important Information</div>\n        <p className=\"confirmation-note-text\">\n          Our driver will contact you directly to discuss the total payment amount and confirm all booking details. \n          Payment will be arranged directly with you before your trip. Please keep this confirmation for your records.\n        </p>\n      </div>\n\n      <div className=\"confirmation-footer\">\n        <div className=\"confirmation-footer-title\">Contact Us</div>\n        <div className=\"confirmation-footer-info\">\n          <strong>Phone:</strong> <a href=\"tel:+18629029304\">+1 (862) 902-9304</a>\n        </div>\n        <div className=\"confirmation-footer-info\">\n          <strong>Email:</strong> <a href=\"mailto:Jjlimoservices21@gmail.com\">Jjlimoservices21@gmail.com</a>\n        </div>\n        <div className=\"confirmation-footer-info\">\n          <strong>Service:</strong> 24/7 Available\n        </div>\n        <div className=\"confirmation-footer-info\" style={{ marginTop: '20px', fontSize: '12px', color: '#94a3b8' }}>\n          Confirmation generated on {currentDate}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n","import React, { useState, useRef } from \"react\";\r\nimport \"./BookingConfirmationModal.css\";\r\nimport BookingConfirmationTemplate from \"./BookingConfirmationTemplate\";\r\n\r\nexport default function BookingConfirmationModal({ isOpen, onClose, bookingData }) {\r\n  const [isSuccess, setIsSuccess] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [bookingRef, setBookingRef] = useState(\"\");\r\n  const printRef = useRef(null);\r\n  const printContainerRef = useRef(null);\r\n\r\n  // Generate booking reference number\r\n  const generateBookingRef = () => {\r\n    const prefix = \"JJ\";\r\n    const timestamp = Date.now().toString().slice(-8);\r\n    const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');\r\n    return `${prefix}-${timestamp}-${random}`;\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const formatTime = (time) => {\r\n    if (!time) return \"—\";\r\n    const [hStr = '', mStr = ''] = time.split(\":\");\r\n    if (hStr === '' || mStr === '') return time;\r\n    return `${hStr.padStart(2, '0')}:${mStr.padStart(2, '0')}`;\r\n  };\r\n\r\n  const handleConfirm = () => {\r\n    if (isSubmitting) return;\r\n\r\n    setIsSubmitting(true);\r\n\r\n    // Generate booking reference\r\n    const ref = generateBookingRef();\r\n    setBookingRef(ref);\r\n\r\n    // Simulate processing/loading before showing success state\r\n    setTimeout(() => {\r\n      console.log(\"Booking confirmed:\", bookingData);\r\n      console.log(\"Booking Reference:\", ref);\r\n      setIsSubmitting(false);\r\n      setIsSuccess(true);\r\n    }, 1200);\r\n  };\r\n\r\n  const handlePrint = () => {\r\n    // Create a new window with the template for printing\r\n    const printWindow = window.open('', '_blank');\r\n    const templateHTML = printRef.current ? printRef.current.innerHTML : '';\r\n    \r\n    printWindow.document.write(`\r\n      <!DOCTYPE html>\r\n      <html>\r\n        <head>\r\n          <title>Booking Confirmation - ${bookingRef}</title>\r\n          <style>\r\n            @media print {\r\n              @page {\r\n                margin: 20mm;\r\n              }\r\n            }\r\n            body {\r\n              margin: 0;\r\n              padding: 0;\r\n              font-family: 'Inter', 'Arial', sans-serif;\r\n            }\r\n          </style>\r\n        </head>\r\n        <body>\r\n          ${templateHTML}\r\n        </body>\r\n      </html>\r\n    `);\r\n    printWindow.document.close();\r\n    setTimeout(() => {\r\n      printWindow.print();\r\n    }, 250);\r\n  };\r\n\r\n  const handleDownloadPDF = () => {\r\n    // Open confirmation in a new window for viewing/downloading\r\n    const viewWindow = window.open('', '_blank');\r\n    const templateHTML = printRef.current ? printRef.current.innerHTML : '';\r\n    \r\n    viewWindow.document.write(`\r\n      <!DOCTYPE html>\r\n      <html>\r\n        <head>\r\n          <title>Booking Confirmation - ${bookingRef}</title>\r\n          <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js\"></script>\r\n          <style>\r\n            @media print {\r\n              @page {\r\n                margin: 20mm;\r\n              }\r\n            }\r\n            body {\r\n              margin: 0;\r\n              padding: 20px;\r\n              font-family: 'Inter', 'Arial', sans-serif;\r\n              background: #f8fafc;\r\n            }\r\n            .view-actions {\r\n              position: fixed;\r\n              top: 10px;\r\n              right: 10px;\r\n              z-index: 1000;\r\n              display: flex;\r\n              gap: 10px;\r\n              flex-wrap: wrap;\r\n            }\r\n            .view-btn {\r\n              padding: 10px 20px;\r\n              background: #0b6cf2;\r\n              color: white;\r\n              border: none;\r\n              border-radius: 6px;\r\n              cursor: pointer;\r\n              font-weight: 600;\r\n              font-size: 14px;\r\n            }\r\n            .view-btn:hover {\r\n              background: #0956c4;\r\n            }\r\n            .view-btn.jpeg {\r\n              background: #f59e0b;\r\n            }\r\n            .view-btn.jpeg:hover {\r\n              background: #d97706;\r\n            }\r\n            @media print {\r\n              .view-actions {\r\n                display: none;\r\n              }\r\n            }\r\n          </style>\r\n        </head>\r\n        <body>\r\n          <div class=\"view-actions\">\r\n            <button class=\"view-btn\" onclick=\"window.print()\">🖨️ Print / Save as PDF</button>\r\n            <button class=\"view-btn jpeg\" onclick=\"downloadJPEG()\">🖼️ Download as JPEG</button>\r\n            <button class=\"view-btn\" onclick=\"window.close()\" style=\"background: #64748b;\">Close</button>\r\n          </div>\r\n          <div id=\"confirmation-content\">\r\n            ${templateHTML}\r\n          </div>\r\n          <script>\r\n            async function downloadJPEG() {\r\n              try {\r\n                const content = document.getElementById('confirmation-content');\r\n                const canvas = await html2canvas(content, {\r\n                  backgroundColor: '#ffffff',\r\n                  scale: 2,\r\n                  logging: false,\r\n                  useCORS: true\r\n                });\r\n                const dataUrl = canvas.toDataURL('image/jpeg', 0.95);\r\n                const link = document.createElement('a');\r\n                link.download = 'Booking-Confirmation-${bookingRef}.jpg';\r\n                link.href = dataUrl;\r\n                link.click();\r\n              } catch (error) {\r\n                console.error('Error generating JPEG:', error);\r\n                alert('Failed to generate JPEG. Please try again.');\r\n              }\r\n            }\r\n          </script>\r\n        </body>\r\n      </html>\r\n    `);\r\n    viewWindow.document.close();\r\n  };\r\n\r\n  const handleSuccessClose = () => {\r\n    setIsSuccess(false);\r\n    onClose();\r\n    // Redirect to home page\r\n    window.location.href = \"/\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n        {!isSuccess ? (\r\n          <>\r\n            <div className=\"modal-header\">\r\n              <h2>Confirm Your Booking</h2>\r\n              <button className=\"modal-close\" onClick={onClose}>×</button>\r\n            </div>\r\n            \r\n            <div className=\"modal-body\">\r\n              <div className=\"confirmation-section\">\r\n                <h3>Booking Details</h3>\r\n                <div className=\"confirmation-row\">\r\n                  <span className=\"confirmation-label\">Pickup Location:</span>\r\n                  <span className=\"confirmation-value\">\r\n                    {bookingData.pickup || (bookingData.pickupCoords ? `${bookingData.pickupCoords.lat.toFixed(6)}, ${bookingData.pickupCoords.lng.toFixed(6)}` : \"—\")}\r\n                  </span>\r\n                </div>\r\n                <div className=\"confirmation-row\">\r\n                  <span className=\"confirmation-label\">Dropoff Location:</span>\r\n                  <span className=\"confirmation-value\">\r\n                    {bookingData.dropoff || (bookingData.dropoffCoords ? `${bookingData.dropoffCoords.lat.toFixed(6)}, ${bookingData.dropoffCoords.lng.toFixed(6)}` : \"—\")}\r\n                  </span>\r\n                </div>\r\n                <div className=\"confirmation-row\">\r\n                  <span className=\"confirmation-label\">Date:</span>\r\n                  <span className=\"confirmation-value\">{bookingData.date || \"—\"}</span>\r\n                </div>\r\n                <div className=\"confirmation-row\">\r\n                  <span className=\"confirmation-label\">Time:</span>\r\n                  <span className=\"confirmation-value\">{formatTime(bookingData.time)}</span>\r\n                </div>\r\n                <div className=\"confirmation-row\">\r\n                  <span className=\"confirmation-label\">Vehicle:</span>\r\n                  <span className=\"confirmation-value\">{bookingData.vehicle || \"—\"}</span>\r\n                </div>\r\n                <div className=\"confirmation-row\">\r\n                  <span className=\"confirmation-label\">Passengers:</span>\r\n                  <span className=\"confirmation-value\">{bookingData.passengers ? bookingData.passengers : \"—\"}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"confirmation-section\">\r\n                <h3>Contact Information</h3>\r\n                <div className=\"confirmation-row\">\r\n                  <span className=\"confirmation-label\">Name:</span>\r\n                  <span className=\"confirmation-value\">{bookingData.customerName || \"—\"}</span>\r\n                </div>\r\n                <div className=\"confirmation-row\">\r\n                  <span className=\"confirmation-label\">Phone:</span>\r\n                  <span className=\"confirmation-value\">{bookingData.phone ? `+1 ${bookingData.phone}` : \"—\"}</span>\r\n                </div>\r\n                <div className=\"confirmation-row\">\r\n                  <span className=\"confirmation-label\">Email:</span>\r\n                  <span className=\"confirmation-value\">{bookingData.email || \"—\"}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"confirmation-note\" style={{ background: \"#f0f9ff\", border: \"2px solid #0b6cf2\", borderRadius: \"12px\", padding: \"20px\", marginTop: \"20px\" }}>\r\n                <p style={{ margin: \"0 0 12px 0\", fontWeight: 600, color: \"#0f172a\", fontSize: \"16px\" }}>\r\n                  Pricing & Payment:\r\n                </p>\r\n                <p style={{ margin: \"16px 0 0 0\", fontSize: \"14px\", color: \"#64748b\", lineHeight: \"1.6\" }}>\r\n                  By confirming, you agree to our{\" \"}\r\n                  <a\r\n                    href=\"/terms\"\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    style={{ color: \"#0b6cf2\", fontWeight: 600 }}\r\n                  >\r\n                    terms and conditions\r\n                  </a>\r\n                  . \r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"modal-footer\">\r\n              <button className=\"btn-cancel\" onClick={onClose} disabled={isSubmitting}>\r\n                Cancel\r\n              </button>\r\n              <button className=\"btn-confirm\" onClick={handleConfirm} disabled={isSubmitting}>\r\n                {isSubmitting ? \"Confirming...\" : \"Confirm Booking\"}\r\n              </button>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <div className=\"modal-header\">\r\n              <h2>Booking Successful</h2>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <p style={{ fontSize: \"16px\", color: \"#0f172a\", marginBottom: \"12px\" }}>\r\n                Thank you, {bookingData.customerName || \"guest\"}!\r\n              </p>\r\n              <p style={{ fontSize: \"14px\", color: \"#64748b\", marginBottom: \"20px\" }}>\r\n                Your booking has been successfully submitted. Our team will contact you shortly to confirm all details.\r\n                Please also check your email and SMS for a confirmation message.\r\n              </p>\r\n              {bookingRef && (\r\n                <div style={{ \r\n                  background: \"#f0f9ff\", \r\n                  border: \"2px solid #0b6cf2\", \r\n                  borderRadius: \"12px\", \r\n                  padding: \"16px\", \r\n                  marginBottom: \"20px\",\r\n                  textAlign: \"center\"\r\n                }}>\r\n                  <div style={{ fontSize: \"12px\", color: \"#64748b\", marginBottom: \"5px\" }}>\r\n                    Booking Reference Number\r\n                  </div>\r\n                  <div style={{ fontSize: \"20px\", fontWeight: 700, color: \"#0b6cf2\", fontFamily: \"monospace\" }}>\r\n                    {bookingRef}\r\n                  </div>\r\n                </div>\r\n              )}\r\n              <div style={{ display: \"flex\", gap: \"12px\", justifyContent: \"center\", flexWrap: \"wrap\" }}>\r\n                <button \r\n                  className=\"btn-confirm\" \r\n                  onClick={handleDownloadPDF}\r\n                  style={{ minWidth: \"140px\", background: \"#10b981\" }}\r\n                >\r\n                  📄 View Booking Information\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button className=\"btn-confirm\" onClick={handleSuccessClose}>Done</button>\r\n            </div>\r\n            \r\n            {/* Hidden template for printing */}\r\n            {bookingRef && (\r\n              <div ref={printContainerRef} style={{ position: \"absolute\", left: \"-9999px\", top: \"-9999px\", visibility: \"hidden\" }}>\r\n                <div ref={printRef}>\r\n                  <BookingConfirmationTemplate bookingData={bookingData} bookingRef={bookingRef} />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport BookingConfirmationModal from \"./BookingConfirmationModal\";\r\n\r\nexport default function Step6_Review({ back, data }) {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const handleConfirmClick = () => {\r\n    // Show a short loading state to simulate processing before showing confirmation\r\n    setIsSubmitting(true);\r\n    setTimeout(() => {\r\n      setIsSubmitting(false);\r\n      setIsModalOpen(true);\r\n    }, 1200);\r\n  };\r\n\r\n  const formatTime = (time) => {\r\n    if (!time) return \"—\";\r\n    const [hStr, mStr] = time.split(\":\");\r\n    const h = parseInt(hStr, 10);\r\n    if (Number.isNaN(h)) return time;\r\n    const suffix = h >= 12 ? \"PM\" : \"AM\";\r\n    const hour12 = h % 12 === 0 ? 12 : h % 12;\r\n    return `${hour12}:${mStr} ${suffix}`;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"step-card\">\r\n        <h2 className=\"step-title\">Review Your Booking</h2>\r\n        <p className=\"step-subtitle\">\r\n          Please double‑check all trip and contact details below. If something looks wrong, go back\r\n          and edit it before you confirm your booking. Payment is collected by J&amp;J Limo Services\r\n          on the day of your trip.\r\n        </p>\r\n\r\n        <div className=\"review-section\">\r\n          <h3 className=\"review-section-title\">Trip Details</h3>\r\n          <div className=\"review-row\">\r\n            <strong>Pickup:</strong> {data.pickup || (data.pickupCoords ? `${data.pickupCoords.lat.toFixed(6)}, ${data.pickupCoords.lng.toFixed(6)}` : \"—\")}\r\n          </div>\r\n          <div className=\"review-row\">\r\n            <strong>Dropoff:</strong> {data.dropoff || (data.dropoffCoords ? `${data.dropoffCoords.lat.toFixed(6)}, ${data.dropoffCoords.lng.toFixed(6)}` : \"—\")}\r\n          </div>\r\n          <div className=\"review-row\"><strong>Date:</strong> {data.date || \"—\"}</div>\r\n          <div className=\"review-row\"><strong>Time:</strong> {formatTime(data.time)}</div>\r\n       \r\n          <div className=\"review-row\"><strong>Vehicle:</strong> {data.vehicle || \"—\"}</div>\r\n          <div className=\"review-row\"><strong>Passengers:</strong> {data.passengers}</div>\r\n        </div>\r\n\r\n        <div className=\"review-section\">\r\n          <h3 className=\"review-section-title\">Contact Information</h3>\r\n          <div className=\"review-row\"><strong>Name:</strong> {data.customerName || \"—\"}</div>\r\n          <div className=\"review-row\"><strong>Phone:</strong> {data.phone ? `+1 ${data.phone}` : \"—\"}</div>\r\n          <div className=\"review-row\"><strong>Email:</strong> {data.email || \"—\"}</div>\r\n        </div>\r\n\r\n        <div className=\"total-box\" style={{ background: \"#f0f9ff\", border: \"2px solid #0b6cf2\", borderRadius: \"12px\", padding: \"20px\", marginTop: \"24px\" }}>\r\n          <div style={{ textAlign: \"center\", width: \"100%\" }}>\r\n            <strong style={{ fontSize: \"18px\", color: \"#0f172a\", display: \"block\", marginBottom: \"8px\" }}>\r\n              Pricing Information\r\n            </strong>\r\n            <div className=\"muted\" style={{ fontSize: \"14px\", color: \"#64748b\", lineHeight: \"1.6\" }}>\r\n              Our driver will contact you shortly to discuss the total payment amount and confirm all booking details. \r\n              Payment will be arranged directly with you before your trip.\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"btn-row\">\r\n          <button className=\"back-btn\" onClick={back} disabled={isSubmitting}>\r\n            Back\r\n          </button>\r\n          <button\r\n            className=\"next-btn\"\r\n            onClick={handleConfirmClick}\r\n            disabled={isSubmitting}\r\n          >\r\n            {isSubmitting ? \"Confirming...\" : \"Confirm\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {isSubmitting && (\r\n        <div className=\"page-loading-overlay\">\r\n          <div className=\"page-loading-card\">\r\n            <div className=\"page-loading-spinner\" />\r\n            <p>Confirming your booking…</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <BookingConfirmationModal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        bookingData={data}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function ProgressBar({ step }) {\r\n  const steps = [\"Locations\", \"Date & Time\", \"Vehicle\", \"Contact Info\", \"Review\"];\r\n\r\n  return (\r\n    <div className=\"progress-bar-wrapper\">\r\n      {steps.map((label, index) => {\r\n        const stepNum = index + 1;\r\n        const isActive = stepNum === step;\r\n        const isCompleted = stepNum < step;\r\n\r\n        return (\r\n          <div key={label} className=\"progress-step\">\r\n            <div\r\n              className={`circle ${isActive ? \"active\" : \"\"} ${isCompleted ? \"completed\" : \"\"}`}\r\n            >\r\n              {stepNum}\r\n            </div>\r\n            <div className=\"step-label\">{label}</div>\r\n            {index < steps.length - 1 && (\r\n              <div className={`bar ${isCompleted ? \"completed\" : \"\"}`}></div>\r\n            )}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useLocation } from 'react-router-dom';\r\nimport Step1_Locations from \"./components/Step1_Locations\";\r\nimport Step2_DateTime from \"./components/Step2_DateTime\";\r\nimport Step3_Vehicle from \"./components/Step3_Vehicle\";\r\nimport Step5_CustomerInfo from \"./components/Step5_CustomerInfo\";\r\nimport Step6_Review from \"./components/Step6_Review\";\r\nimport ProgressBar from \"./components/ProgressBar\";\r\n\r\nexport default function BookingWizard() {\r\n  const [step, setStep] = useState(1);\r\n\r\n  const [data, setData] = useState({\r\n    pickup: \"\",\r\n    dropoff: \"\",\r\n    pickupCoords: null,\r\n    dropoffCoords: null,\r\n    date: \"\",\r\n    time: \"\",\r\n    vehicle: \"\",\r\n    passengers: \"\",\r\n    distanceKm: 0,\r\n    addons: [],\r\n    price: 0,\r\n    customerName: \"\",\r\n    phone: \"\",\r\n    email: \"\"\r\n  });\r\n\r\n  const location = useLocation();\r\n\r\n  // If the user arrived from VehiclesPage with a preselected vehicle, apply it\r\n  useEffect(() => {\r\n    if (location?.state?.vehicle) {\r\n      const vehicleName = location.state.vehicle;\r\n      // preselect vehicle from fleet page; price will be calculated later based on distance\r\n      setData((d) => ({ ...d, vehicle: vehicleName }));\r\n    }\r\n  }, [location?.state]);\r\n\r\n  const next = () => setStep((s) => Math.min(5, s + 1));\r\n  const back = () => setStep((s) => Math.max(1, s - 1));\r\n\r\n  const setDataPatch = (patch) => setData((d) => ({ ...d, ...patch }));\r\n\r\n  // Keep the current step card (Step 1–5 box) in a stable position when\r\n  // changing steps, so the user always sees the top of the step box.\r\n  useEffect(() => {\r\n    const stepCard = document.querySelector(\".wizard-card\");\r\n    if (stepCard) {\r\n      const rect = stepCard.getBoundingClientRect();\r\n      const offset = 110; // roughly header height + a bit of breathing room\r\n      const targetTop = window.pageYOffset + rect.top - offset;\r\n      window.scrollTo({ top: targetTop, behavior: \"smooth\" });\r\n    }\r\n  }, [step]);\r\n\r\n  const formatTime = (time) => {\r\n    // Display time in 24-hour (military) format `HH:MM`\r\n    if (!time) return \"—\";\r\n    const [hStr = '', mStr = ''] = time.split(\":\");\r\n    if (hStr === '' || mStr === '') return time;\r\n    return `${hStr.padStart(2, '0')}:${mStr.padStart(2, '0')}`;\r\n  };\r\n\r\n  // Strict validation - check if all required steps are completed\r\n  const isBookingComplete = () => {\r\n    return data.pickupCoords && \r\n           data.dropoffCoords && \r\n           data.date && \r\n           data.time && \r\n           data.vehicle && \r\n           data.passengers > 0 &&\r\n           data.customerName &&\r\n           data.phone &&\r\n           data.phone.replace(/\\D/g, '').length >= 10 &&\r\n           data.email &&\r\n           data.email.includes(\"@\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"wizard-area\">\r\n      <div className=\"container\">\r\n        <div className=\"wizard-card\">\r\n          <ProgressBar step={step} />\r\n\r\n          {step === 1 && (\r\n            <Step1_Locations next={next} data={data} setData={setDataPatch} />\r\n          )}\r\n          {step === 2 && (\r\n            <Step2_DateTime next={next} back={back} data={data} setData={setDataPatch} />\r\n          )}\r\n          {step === 3 && (\r\n            <Step3_Vehicle next={next} back={back} data={data} setData={setDataPatch} />\r\n          )}\r\n          {step === 4 && (\r\n            <Step5_CustomerInfo next={next} back={back} data={data} setData={setDataPatch} />\r\n          )}\r\n          {step === 5 && (\r\n            <Step6_Review back={back} data={data} />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["LocationMapPreview","_ref","pickupCoords","dropoffCoords","pickupAddress","dropoffAddress","onPickupSelect","onDropoffSelect","onMapClose","alwaysVisible","mapRef","useRef","mapInstanceRef","pickupCoordsRef","dropoffCoordsRef","activeLocation","setActiveLocation","useState","activeLocationRef","pickupMarker","setPickupMarker","dropoffMarker","setDropoffMarker","isGeocoding","setIsGeocoding","isGettingLocation","setIsGettingLocation","useEffect","current","isMounted","initializeMap","window","L","center","bounds","navigator","geolocation","getCurrentPosition","position","userLat","coords","latitude","userLng","longitude","setView","enableHighAccuracy","timeout","maximumAge","lat","lng","newMap","map","tileLayer","attribution","maxZoom","addTo","fitBounds","padding","redPinIcon","divIcon","className","html","iconSize","iconAnchor","bluePinIcon","pickup","marker","icon","bindPopup","toFixed","dropoff","polyline","color","weight","dashArray","on","async","e","latlng","currentPickup","currentDropoff","locationToSet","address","url","concat","response","fetch","headers","json","display_name","err","console","error","reverseGeocode","setTimeout","document","querySelector","link","createElement","rel","href","integrity","crossOrigin","head","appendChild","checkLeaflet","setInterval","clearInterval","script","src","onload","onerror","body","remove","removeLayer","eachLayer","layer","Polyline","_jsx","children","_jsxs","ref","onClick","type","title","Step1_Locations","next","data","setData","setPickupCoords","setDropoffCoords","pickupSearch","setPickupSearch","dropoffSearch","setDropoffSearch","pickupLoading","setPickupLoading","dropoffLoading","setDropoffLoading","pickupError","setPickupError","dropoffError","setDropoffError","pickupResults","setPickupResults","dropoffResults","setDropoffResults","handlePickupCoords","handleDropoffCoords","handleLocationSearch","isPickup","query","trim","encodeURIComponent","results","length","handleSelectResult","result","parseFloat","lon","fullAddress","geocodeData","km","a","b","toRad","v","Math","PI","dLat","dLon","lat1","lat2","sinDlat","sin","sinDlon","aHar","cos","atan2","sqrt","estimateDistanceKm","distanceKm","clearLocation","value","placeholder","onChange","target","onKeyDown","key","preventDefault","disabled","road","neighbourhood","suburb","place_id","Step2_DateTime","back","today","Date","toISOString","split","isValidFutureDate","date","picked","Number","isNaN","getTime","todayDate","setHours","isValidFutureDateTime","time","hStr","mStr","h","parseInt","m","min","raw","String","cleaned","replace","normalized","includes","parts","p","slice","filter","i","join","digits","passengers","max","num","maxPassengers","vehicles","name","img","Step3_Vehicle","vehicle","alt","loading","decoding","Step5_CustomerInfo","_data$customerName","_data$email","_data$phone","customerName","formatted","_","first","rest","toUpperCase","toLowerCase","required","email","phone","phoneNumberDigits","formatPhoneNumber","maxLength","BookingConfirmationTemplate","bookingData","bookingRef","currentDate","toLocaleDateString","year","month","day","id","dateStr","weekday","_unused","formatDate","suffix","formatTime","style","marginTop","fontSize","BookingConfirmationModal","isOpen","onClose","isSuccess","setIsSuccess","isSubmitting","setIsSubmitting","setBookingRef","printRef","printContainerRef","stopPropagation","_Fragment","marginBottom","background","border","borderRadius","textAlign","fontWeight","fontFamily","display","gap","justifyContent","flexWrap","handleDownloadPDF","viewWindow","open","templateHTML","innerHTML","write","close","minWidth","handleSuccessClose","location","left","top","visibility","padStart","margin","lineHeight","handleConfirm","generateBookingRef","timestamp","now","toString","random","floor","log","Step6_Review","isModalOpen","setIsModalOpen","width","handleConfirmClick","ProgressBar","step","steps","label","index","stepNum","isActive","isCompleted","BookingWizard","setStep","addons","price","useLocation","_location$state","state","vehicleName","d","_objectSpread","s","setDataPatch","patch","stepCard","rect","getBoundingClientRect","offset","targetTop","pageYOffset","scrollTo","behavior"],"ignoreList":[],"sourceRoot":""}